<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fetch and trim DEM of a region — dem_region • bcaquiferdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch and trim DEM of a region — dem_region"><meta name="description" content="This function takes a shape file of a region and creates a DEM of the region.
Lidar data is stored locally as tiles. Tiles are only downloaded if they
don't already exist unless only_new = FALSE. TRIM data is obtained via the
bcmaps package and stored locally as tiles. Note: TRIM elevation is
coarser than Lidar Use Lidar unless it is missing for your region of
interest."><meta property="og:description" content="This function takes a shape file of a region and creates a DEM of the region.
Lidar data is stored locally as tiles. Tiles are only downloaded if they
don't already exist unless only_new = FALSE. TRIM data is obtained via the
bcmaps package and stored locally as tiles. Note: TRIM elevation is
coarser than Lidar Use Lidar unless it is missing for your region of
interest."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bcaquiferdata</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/bcaquiferdata.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/flags.html">Flags</a></li>
    <li><a class="dropdown-item" href="../articles/lithology_categorization.html">Lithology Cleaning and Categorizing</a></li>
    <li><a class="dropdown-item" href="../articles/roadmap.html">Roadmap: Workflow and Design Plan</a></li>
    <li><a class="dropdown-item" href="../articles/shiny_apps.html">Shiny Apps Workshop</a></li>
    <li><a class="dropdown-item" href="../articles/Workflow-examples.html">Workflow Examples</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bcgov/bcaquiferdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fetch and trim DEM of a region</h1>
      <small class="dont-index">Source: <a href="https://github.com/bcgov/bcaquiferdata/blob/dev/R/workflow.R" class="external-link"><code>R/workflow.R</code></a></small>
      <div class="d-none name"><code>dem_region.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes a shape file of a region and creates a DEM of the region.
Lidar data is stored locally as tiles. Tiles are only downloaded if they
don't already exist unless <code>only_new = FALSE</code>. TRIM data is obtained via the
<code>bcmaps</code> package and stored locally as tiles. <strong>Note:</strong> TRIM elevation is
coarser than Lidar Use Lidar unless it is missing for your region of
interest.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dem_region</span><span class="op">(</span></span>
<span>  <span class="va">region</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"lidar"</span>,</span>
<span>  buffer <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lidar_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  only_new <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  progress <span class="op">=</span> <span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/progress.html" class="external-link">progress</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-region">region<a class="anchor" aria-label="anchor" href="#arg-region"></a></dt>
<dd><p>sf simple features object. Shape file of the region of
interest.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Character. Type of DEM to download, either "lidar" or "trim". Use
Lidar unless unavailable.</p></dd>


<dt id="arg-buffer">buffer<a class="anchor" aria-label="anchor" href="#arg-buffer"></a></dt>
<dd><p>Numeric. Percent buffer to apply to the <code>region</code> spatial file
before cropping the DEM data to match. Increase this value if you find
that wells on the edge of your area aren't been matched to elevations when
using <code><a href="wells_elev.html">wells_elev()</a></code>.</p></dd>


<dt id="arg-lidar-dir">lidar_dir<a class="anchor" aria-label="anchor" href="#arg-lidar-dir"></a></dt>
<dd><p>Character. File path of where Lidar tiles should be stored.
Defaults to the cache directory. Only applies when <code>type = "lidar"</code>.</p></dd>


<dt id="arg-only-new">only_new<a class="anchor" aria-label="anchor" href="#arg-only-new"></a></dt>
<dd><p>Logical. Whether to download all Lidar tiles, or only new
tiles that don't exist locally. Defaults to TRUE. Only apples when <code>type = "lidar"</code>.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Function. Progress bar to use. Generally leave as is.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>stars spatiotemporal array object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Lidar tiles are the newest tile available. If you have reason to need a
historical file, contact the team to discuss your use case.</p>
    </div>
    <div class="section level2">
    <h2 id="data-source">Data Source<a class="anchor" aria-label="anchor" href="#data-source"></a></h2>



<p>Lidar data is obtained from the LidarBC portal. The <code>tiles</code> data frame
contains is an internally created data frame listing tiles and their
respective download locations. Tiles to download are selected based on
overlap between map tiles and the provided shapefile (<code>region</code>). These Lidar
tiles can be browsed and downloaded manually via the
<a href="https://governmentofbc.maps.arcgis.com/apps/MapSeries/index.html?appid=d06b37979b0c4709b7fcf2a1ed458e03" class="external-link">LidarBC Open LiDAR Data Portal</a></p>
<p>The grid of map tiles is obtained from the BC Data Catalogue,
<a href="https://catalogue.data.gov.bc.ca/dataset/a61976ac-d8e8-4862-851e-d105227b6525" class="external-link">BCGS 1:20,000 Grid</a></p>
<p>TRIM data is obtained via the <code>bcmaps</code> package from the BC government
<a href="https://catalogue.data.gov.bc.ca/dataset/7b4fef7e-7cae-4379-97b8-62b03e9ac83d" class="external-link">Data Catalogue</a>
based on overlap between map tiles and the provided shapefile (<code>region</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load a shape file defining the region of interest</span></span></span>
<span class="r-in"><span><span class="va">creek_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"misc/data/Clinton_Creek.shp"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch Lidar DEM</span></span></span>
<span class="r-in"><span><span class="va">creek_lidar</span> <span class="op">&lt;-</span> <span class="fu">dem_region</span><span class="op">(</span><span class="va">creek_sf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">creek_lidar</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch TRIM DEM</span></span></span>
<span class="r-in"><span><span class="va">creek_trim</span> <span class="op">&lt;-</span> <span class="fu">dem_region</span><span class="op">(</span><span class="va">creek_sf</span>, type <span class="op">=</span> <span class="st">"trim"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">creek_trim</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steffi LaZerte, Christine Bieber, David van Everdingen, Andarge Baye.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

